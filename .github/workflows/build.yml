name: Build

on:
  workflow_dispatch:
  pull_request:
    branches: [ "main" ]

# Change version values here
env:
  GODOT_VERSION: 3.4.4
  EXPORT_NAME: spectral-shift

jobs:

  build:
    strategy:
      matrix:
        platform: [ windows, linux, mac ]

    name: Build ${{ matrix.platform }}

    runs-on: ubuntu-latest
    container:
      image: microbob/godot-exporter:latest

    steps:

    - name: ğŸ› Checkout
      uses: actions/checkout@v3
    
    - name: ğŸ“ Set export name
      run: EXPORT_NAME=${{ env.EXPORT_NAME }}
    
    - name: Show location
      run: pwd && ls

    - name: ğŸ“¦ Build
      run: source ../build/${{ matrix.platform }}-export.sh

    - name: â¬†ï¸ Upload Artifact
      uses: actions/upload-artifact@v1
      with:
        name: ${{ matrix.platform }}
        path: ../build/${{ matrix.platform }}